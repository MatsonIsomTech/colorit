{% import "_includes/forms" as forms %}

{% if field.isFieldTemplate %}

{#     {{ forms.textField({
        label: 'Name'|t('palette'),
        instructions: 'What this field template will be called in the CP.'|t('palette'),
        id: 'name',
        name: 'name',
        placeholder: '',
        value: field.name ?? '',
        errors: field.getErrors('name') ?? false,
        first: true
    }) }} #}

{% else %}

    {{ forms.selectField({
        label: "Field Template"|t('palette'),
        instructions: "Use a field template to define this fields settings."|t('palette'),
        id: 'fieldTemplateId',
        name: 'fieldTemplateId',
        options: [
            {
                value: '',
                label: 'Custom field settings'
            }
        ],
        value: field.fieldTemplateId,
        errors: field.getErrors('fieldTemplateId'),
    }) }}

    <hr>

{% endif %}


<div id="palette-{{ field.id }}" class="{{ field.fieldTemplateId ? 'hidden' }}">


    {{ forms.textField({
        label: 'Test Attr'|t('palette'),
        instructions: 'What this field template will be called in the CP.'|t('palette'),
        id: 'testAttr',
        name: 'testAttr',
        placeholder: '',
        value: field.testAttr ?? '',
        errors: field.getErrors('testAttr') ?? false,
        first: true
    }) }}

    {{ forms.editableTableField({
        label: 'Palette Colours',
        instructions : 'Set the palette colours, these can be changed at any time.'|t('palette'),
        id: 'paletteColours',
        rows: 4,
        textual: false,
        name: 'paletteColours',
        addRowLabel: 'Add colour',
        cols: {
            'label' : {
                'heading' : 'Label',
                'type'   : 'singleline'
            },
            'handle' : {
                'heading' : 'Handle',
                'type'   : 'singleline'
            },
            'colour' : {
                'heading' : 'Colour',
                'type'   : 'singleline'
            }
        },
        rows: field.paletteColours ?? false,
        errors: []
    }) }}

    {#
    {% js %}
        new Craft.HandleGenerator('#label', '#handle');
    {% endjs %}
    #}

    {{ forms.checkboxSelectField({
        label: "Base Colours"|t('palette'),
        instructions: "Select any base colours that you would like to include in your palette field."|t('palette'),
        id: 'paletteBaseColours',
        name: 'paletteBaseColours',
        options: craft.palette.colours.baseColoursAsOptions,
        values: field.paletteBaseColours,
        errors: field.getErrors('paletteBaseColours')
    })}}

    {{ forms.lightswitchField({
        label: "Opacity"|t('palette'),
        instructions: "Allow the user to set opacty on this palette field."|t('palette'),
        id: 'allowOpacity',
        name: 'allowOpacity',
        on: field.allowOpacity,
        errors: field.getErrors('allowOpacity')
    }) }}

    {{ forms.lightswitchField({
        label: "Custom Colour"|t('palette'),
        instructions: "Allow the user to set a custom colour hex for this palette field."|t('palette'),
        id: 'allowCustomColour',
        name: 'allowCustomColour',
        on: field.allowCustomColour,
        errors: field.getErrors('allowCustomColour')
    }) }}

    {{ forms.selectField({
        label: "Colour Output"|t('palette'),
        instructions: "Select the default colour output you would like to return."|t('palette'),
        id: 'colourFormat',
        name: 'colourFormat',
        options: {
            'auto' : 'Auto: Best Guess',
            'hex' : 'HEX: #454545',
            'rgb' : 'RGB: rgb(255,255,255)',
            'rgba' : 'RGBA: rgb(255,255,255,0.5)'
        },
        value: field.colourFormat,
        errors: field.getErrors('colourFormat')
    }) }}

</div>
