{% import "_includes/forms" as forms %}

{{ forms.selectField({
    label: "Presets Settings"|t('palette'),
    instructions: "Select from your preset settings which can be "|t('palette'),
    id: 'presetSettingsId',
    name: 'presetSettingsId',
    options: [
        { value: '', label: 'Select preset...'  }
    ],
    value: field.presetSettingsId,
    errors: field.getErrors('presetSettingsId'),
}) }}

<div id="{{ field.id }}-local" class="{{ field.presetSettingsId ? 'hidden' }}">

    {{ forms.editableTableField({
        label: 'Palette Colours',
        instructions : 'Set the palette colours, these can be changed at any time.'|t('palette'),
        id: 'paletteColours',
        rows: 4,
        textual: false,
        name: 'paletteColours',
        addRowLabel: 'Add colour',
        cols: {
            'label' : {
                'heading' : 'Label',
                'type'   : 'singleline'
            },
            'handle' : {
                'heading' : 'Handle',
                'type'   : 'singleline'
            },
            'colour' : {
                'heading' : 'Colour',
                'type'   : 'singleline'
            }
        },
        rows: field.paletteColours ?? false,
        errors: []
    }) }}

    {#
    {% js %}
        new Craft.HandleGenerator('#label', '#handle');
    {% endjs %}
    #}

    {{ forms.checkboxSelectField({
        label: "Base Colours"|t('palette'),
        instructions: "Select any base colours that you would like to include in your palette field."|t('palette'),
        id: 'paletteBaseColours',
        name: 'paletteBaseColours',
        options: craft.palette.baseColoursAsOptions,
        values: field.paletteBaseColours,
        errors: field.getErrors('paletteBaseColours')
    })}}

    {{ forms.lightswitchField({
        label: "Opacity"|t('palette'),
        instructions: "Allow the user to set opacty on this palette field."|t('palette'),
        id: 'allowOpacity',
        name: 'allowOpacity',
        on: field.allowOpacity,
        errors: field.getErrors('allowOpacity')
    }) }}

    {{ forms.lightswitchField({
        label: "Custom Colour"|t('palette'),
        instructions: "Allow the user to set a custom colour hex for this palette field."|t('palette'),
        id: 'allowCustomColour',
        name: 'allowCustomColour',
        on: field.allowCustomColour,
        errors: field.getErrors('allowCustomColour')
    }) }}

    {{ forms.selectField({
        label: "Colour Output"|t('palette'),
        instructions: "Select the default colour output you would like to return."|t('palette'),
        id: 'colourFormat',
        name: 'colourFormat',
        options: {
            'auto' : 'Auto: Best Guess',
            'hex' : 'HEX: #454545',
            'rgb' : 'RGB: rgb(255,255,255)',
            'rgba' : 'RGBA: rgb(255,255,255,0.5)'
        },
        value: field.colourFormat,
        errors: field.getErrors('colourFormat')
    }) }}

</div>

{% if not global %}

    <div id="{{ field.id }}-global" class="{{ not field.useGlobalSettings ? 'hidden' }}">

        {{ field.inputPreviewHtml | raw }}
        <p><a href="{{ cpUrl('settings/plugins/palette') }}">Update Global Settings</a></p>

    </div>

{% endif %}
